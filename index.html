<!DOCTYPE html>
<html lang="en">
    <head>
        <title>TT Sekete Portfolio Website</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="./index.css" rel="stylesheet">
    </head>
    <body id = "myBody">
        <nav class="nav-bar">
            <h1>Tshepo T Sekete</h1>
            <div class="nav-links">
                <a href="./index.html">Home</a>
                <a href="./resume.html">Resume</a>
                <a href="./contact.html">Contact</a>
            </div>
        </nav>
        <section class="index">
            <div class="home-content">
                <h3>Weather Forecast</h3>
                <p id="data" class="styleIt"></p>
                <div class="home-desc">
                    <h1>Hello World, my name is <span class="name">Tshepo Sekete</span></h1>
                    <p>I am a detailed orientated individual who is always looking for new opportunities and challenges. I am highly organized, self motivated and very good at dealing with complex situations.</p>
                <a href="./contact.html">
                    <button type="button">Contact Me</button>
                </a>   
                </div>
            </div>

        </section>

        <script>
                var data = document.getElementById("data");
                var Latitude;
                var Longitude;
                var key = "60fd2e95260ceb1accea1a4dab94296f";
                var url = "http://api.openweathermap.org/data/2.5/weather?";

                function getLocation() {
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(showPosition);
                    } else {
                        data_of_Lat_Lon.innerHTML = 
                            "Geolocation is not supported by this browser";
                    }
                }

                function showPosition(position) {
                    Latitude = position.coords.latitude;
                    Longitude = position.coords.longitude;

                    getData(Latitude, Longitude);
                }

                function getData(Lat, Lon) {
                    const readyToSent = (url + "lat=" + Lat 
                        + "&lon=" + Lon + "&appid=" + key);
                    fetch(readyToSent)
                        .then(response => response.json())
                        .then(data => {
                            console.log(data);
                            fetchData(data)
                        })
                }
            
                function fetchData(data) {
                    const icon = "http://openweathermap.org/img/wn/"
                        + data.weather[0].icon + "@2x.png"

                    document.getElementById("data").innerHTML =
                        "<b>The weather report of your Location is :-"
                        + "</b><br> <img src=" + icon + "><br>"
                        + "<b>Country :</b>" + data.sys.country 
                        + "<br><b>Local Area Name :</b>" 
                        + data.name + "<br><b>Temp. :</b>" 
                        + parseFloat((data.main.temp - 273.15))
                        .toFixed(1) + "℃" + 
                        "<br><b>But You will feel like :</b>" 
                        + parseFloat((data.main.feels_like - 
                            273.15)).toFixed(1) + "℃" 
                        + "<br><b>Min. Temp. :</b>" 
                        + parseFloat((data.main.temp_min - 
                            273.15)).toFixed(1) + "℃" 
                        + "<br><b>Max. Temp. :</b>" 
                        + parseFloat((data.main.temp_max - 
                            273.15)).toFixed(1) + "℃" 
                        + "<br><b>Pressure :</b>" 
                        + data.main.pressure + "hPa" 
                        + "<br><b>Humidity :</b>" 
                        + data.main.humidity + "%" 
                        + "<br><b>Weather :</b>" 
                        + data.weather[0].description + "<br>"
                }

                getLocation();
                showPosition();
                getData();
        </script>
       
    </body>
</html>
